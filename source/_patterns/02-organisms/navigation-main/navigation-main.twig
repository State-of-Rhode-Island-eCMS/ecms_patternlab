{# <nav class="qh__navigation" aria-label="Primary">
  <ul id="js__primary-menu" class="qh__navigation__list" role="list">

    <li class="qh__navigation__item">
      <a href="#" class="qh__navigation__link qh__navigation__link--home" title="Back to Home">
        <span class="qh__icon">
          <?xml version="1.0" encoding="utf-8"?><svg class="qh__icon__home" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 44 44" style="enable-background:new 0 0 44 44;" xml:space="preserve"><path class="qh__icon__home__shape" d="M34.3,22.1L30,17.9V12h-2v3.9L22.1,10L10,22.1l1.4,1.4L14,21v11h16V20.7l2.9,2.9L34.3,22.1z M28,30h-3.9v-3.9 c0-1.1-0.9-2-2-2s-2,0.9-2,2V30H16V19l6.1-6.1l5.9,5.9V30z"/></svg>
          <span class="visually-hidden">Home</span>
        </span>
      </a>
    </li>

    <li class="qh__navigation__item qh__navigation__has-children">
      <a href="#" class="js-qh-dd-toggle qh__navigation__link"
        id="menu-1" role="button" aria-haspopup="true" aria-expanded="false">
        About
        <span class="qh__icon">
          <?xml version="1.0" encoding="utf-8"?><svg class="qh__icon__chevron-down" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 44 44" style="enable-background:new 0 0 44 44;" xml:space="preserve"><circle class="qh__icon__chevron-down__circle" cx="22" cy="22" r="7"/><polygon class="qh__icon__chevron-down__arrow" points="25.7,19.2 22,22.9 18.3,19.2 16.9,20.6 22,25.8 27.1,20.6 "/></svg>
          <span class="visually-hidden">Toggle child menu</span>
        </span>
      </a>
      <ul class="qh__navigation__list qh__navigation__list__sub" aria-labelledby="menu-1">
        <li class="qh__navigation__item  qh__navigation__item__sub">
          <a href="#" class="qh__navigation__link  qh__navigation__link__sub">Child item 1</a>
        </li>
        <li class="qh__navigation__item  qh__navigation__item__sub">
          <a href="#" class="qh__navigation__link  qh__navigation__link__sub">Child item 2</a>
        </li>
        <li class="qh__navigation__item  qh__navigation__item__sub">
          <a href="#" class="qh__navigation__link  qh__navigation__link__sub">Child item 3</a>
        </li>
      </ul>
    </li>

    <li class="qh__navigation__item qh__navigation__has-children">
      <a href="#" class="js-qh-dd-toggle qh__navigation__link"
        id="menu-2" role="button" aria-haspopup="true" aria-expanded="false">
        What does this agency do?
        <span class="qh__icon">
          <?xml version="1.0" encoding="utf-8"?><svg class="qh__icon__chevron-down" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 44 44" style="enable-background:new 0 0 44 44;" xml:space="preserve">
<circle class="qh__icon__chevron-down__circle" cx="22" cy="22" r="7"/><polygon class="qh__icon__chevron-down__arrow" points="25.7,19.2 22,22.9 18.3,19.2 16.9,20.6 22,25.8 27.1,20.6 "/></svg>
          <span class="visually-hidden">Toggle child menu</span>
        </span>
      </a>
      <ul class="qh__navigation__list qh__navigation__list__sub" aria-labelledby="menu-2">
        <li class="qh__navigation__item  qh__navigation__item__sub">
          <a href="#" class="qh__navigation__link  qh__navigation__link__sub">Child item 1</a>
        </li>
        <li class="qh__navigation__item  qh__navigation__item__sub">
          <a href="#" class="qh__navigation__link  qh__navigation__link__sub">Child item 2</a>
        </li>
        <li class="qh__navigation__item  qh__navigation__item__sub">
          <a href="#" class="qh__navigation__link  qh__navigation__link__sub">Child item 3</a>
        </li>
      </ul>
    </li>

    <li class="qh__navigation__item">
      <a href="#" class="qh__navigation__link qh__navigation__link--current">
        Current Parent
      </a>
    </li>

    <li class="qh__navigation__item">
      <a href="#" class="qh__navigation__link">
        Contact
      </a>
    </li>
  </ul>
</nav> #}

{% import _self as menus %}

{#
  We call a macro which calls itself to render the full tree.
  @see https://twig.symfony.com/doc/1.x/tags/macro.html
#}
{{ menus.menu_links(items, attributes, 0, 0, FALSE) }}

{% macro menu_links(items, attributes, menu_level, generated_id, sub_menu_item) %}
  {% import _self as menus %}
  {% if items %}

    {# Main list wrapper only. Add nav wrapper. Add Home Link #}
    {% if menu_level == 0 %}
      <nav class="qh__navigation" aria-label="Primary">
        <ul id="js__primary-menu" class="qh__navigation__list" role="list">
          <li class="qh__navigation__item">
            <a href="#" class="qh__navigation__link qh__navigation__link--home" title="Back to Home">
              <span class="qh__icon">
                {% include ('@icons/home.svg') %}
                <span class="visually-hidden">Home</span>
              </span>
            </a>
          </li>
    {% else %}
      {# Subnavigation list wrapper #}
      <ul class="qh__navigation__list qh__navigation__list__sub" aria-labelledby="menu-{{ generated_id }}">
    {% endif %}
    {% for item in items %}
      {% set link_id = random(10000) %}
      {%
        set classes = [
          'qh__navigation__item',
          sub_menu_item ? 'qh__navigation__item__sub',
          item.below ? 'qh__navigation__has-children',
        ]
      %}
      {%
        set link_classes = [
          'qh__navigation__link',
          sub_menu_item ? 'qh__navigation__link__sub',
          item.in_active_trail ? 'qh__navigation__link--current',
        ]
      %}
      {% if (item.is_expanded and item.below) %}
        <li{{ item.attributes.addClass(classes) }}>
          <a href="#" class="js-qh-dd-toggle qh__navigation__link" id="menu-{{ link_id }}" role="button" aria-haspopup="true" aria-expanded="false">
            {{ item.title }}
            <span class="qh__icon">
              {% include ('@icons/chevron-down.svg') %}
              <span class="visually-hidden">Toggle child menu</span>
            </span>
          </a>
          {% if item.below %}
            {{ menus.menu_links(item.below, attributes, menu_level + 1, link_id, TRUE) }}
          {% endif %}
        </li>
      {% else %}
        <li{{ item.attributes.addClass(classes) }}>
          {{
            link(
              item.title,
              item.url,
              item.attributes.removeClass(classes).addClass(link_classes)
            )
          }}
        </li>
      {% endif %}
    {% endfor %}
      </ul>
    {% if menu_level == 0 %}
      </nav>
    {% endif %}
  {% endif %}
{% endmacro %}
